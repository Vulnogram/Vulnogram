//- Copyright (c) 2017 Chandan B N. All rights reserved.

//- Extends default document editor for CVE

extends ../../views/edit
block append bannerItemsLeft
    form.indent.out.nobr(onsubmit="event.preventDefault();loadCVE(this.git.value);return false;")
        input.txt(type="text",name="git",placeholder="CVE-YYYY-NNNN",pattern=".*CVE-[0-9]{4}-[0-9]{4,12}.*",size=17,title="CVE ID CVE-yyyy-nnnn+",required)
        button.btn.vgi-in(type="submit") GIT
    button.fbn.sfe.vgi-put(id="post1") Post to CVE.org
    a.vgi-tweet.fbn(type="button",oncontextmenu='tweetJSON(event, this);',onclick='tweetJSON(event, this);',value="Download",target="_blank",title="Share a tweet about this CVE") Tweet

block append scripts
    script
        include script.js
        include cve.js
    - var compileScript = pugLib.compileFileClient('default/cve5/cvelist.pug', {name: "cveRender", basedir: '', compileDebug: false,inlineRuntimeFunctions: true})
            script !{compileScript}

block prepend loadEditor
    script 
        include preload.js

block append loadEditor
    script 
        include postload.js

block prepend topHeaderRight

block prepend bannerItemsRight
    form.indent.out.nobr(onsubmit="cveSelectLoad(event);return false;")
        input.txt.lbl#cveEditable(type="search",name="id",list="editablelist",placeholder="CVE-yyyy-nnnn..",title="Load CVE for editing",required)
        datalist#editablelist
        button.btn.vgi-in(type="submit") Load

block customtabs
        input.tab(name='tabs', type='radio', id='advisoryTab', value="4")
        label.lbl(for='advisoryTab') Advisory
        .wht.fil.bor.pad
            div(style='float:right')
                a.vgi-download.btn.right(type="button",oncontextmenu='downloadHtml(document.getElementById("cvetitle").innerText, render, this);',onclick='downloadHtml(document.getElementById("cvetitle").innerText, render, this);',value="Download") Download
                a.vgi-mail.btn.right(type="button",oncontextmenu='draftEmail(event, this, "render");',onclick='draftEmail(event, this,"render");',value="Email") Email
            div.render(id="render")
        input.tab(name='tabs', type='radio', id='mitreTab', value="5")
        label.lbl(for='mitreTab') Preview
        .wht.fil.bor.pad
            div#mitreweb
        input.tab(name='tabs', type='radio', id='cveApiTab', value="6")
        label.lbl(for='cveApiTab') CVE Portal
        .wht.fil.bor.pad
            #cvePortal
